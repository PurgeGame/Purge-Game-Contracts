{"abi":[{"type":"function","name":"bondUpkeep","inputs":[{"name":"bondsAddr","type":"address","internalType":"address"},{"name":"stethAddr","type":"address","internalType":"address"},{"name":"coinAddr","type":"address","internalType":"address"},{"name":"rngWord","type":"uint256","internalType":"uint256"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"deployTimestamp","inputs":[],"outputs":[{"name":"","type":"uint48","internalType":"uint48"}],"stateMutability":"view"},{"type":"function","name":"drainToBonds","inputs":[{"name":"bondsAddr","type":"address","internalType":"address"},{"name":"stethAddr","type":"address","internalType":"address"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"gameState","inputs":[],"outputs":[{"name":"","type":"uint8","internalType":"uint8"}],"stateMutability":"view"},{"type":"function","name":"level","inputs":[],"outputs":[{"name":"","type":"uint24","internalType":"uint24"}],"stateMutability":"view"},{"type":"function","name":"stakeForTargetRatio","inputs":[{"name":"bondsAddr","type":"address","internalType":"address"},{"name":"stethAddr","type":"address","internalType":"address"},{"name":"lvl","type":"uint24","internalType":"uint24"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"yieldPool","inputs":[{"name":"stethAddr","type":"address","internalType":"address"}],"outputs":[{"name":"total","type":"uint256","internalType":"uint256"}],"stateMutability":"view"}],"bytecode":{"object":"0x60806040523461002257610011610026565b6040516110d661028182396110d690f35b5f80fd5b61002e610215565b565b9065ffffffffffff905b9181191691161790565b61005c6100596100599265ffffffffffff1690565b90565b65ffffffffffff1690565b9061007761005961007e92610044565b8254610030565b9055565b9062ffffff60d01b9060d01b61003a565b6100a06100596100599290565b62ffffff1690565b906100b861005961007e92610093565b8254610082565b9061ffff60e81b9060e81b61003a565b6100dc6100596100599290565b61ffff1690565b906100f361005961007e926100cf565b82546100bf565b907fff000000000000000000000000000000000000000000000000000000000000009060f81b61003a565b6101326100596100599290565b60ff1690565b9061014861005961007e92610125565b82546100fa565b906cff0000000000000000000000009060601b61003a565b151590565b9061017c61005961007e92610167565b825461014f565b9060ff60781b9060781b61003a565b906101a261005961007e92610167565b8254610183565b906001600160801b039061003a565b6101c56100596100599290565b6001600160801b031690565b906101e161005961007e926101b8565b82546101a9565b905f199061003a565b6100596100596100599290565b9061020e61005961007e926101f1565b82546101e8565b61022565ffffffffffff5f610067565b61025a6001610234815f6100a8565b6102406101a45f6100e3565b61024a5f80610138565b610254818061016c565b80610192565b61026c6658d15e1762800060026101d1565b61002e6806c6b935b8bbd4000060036101fe56fe60806040526004361015610011575f80fd5b5f3560e01c806338850ed914610080578063607ad0d71461007b5780636fd5ae15146100765780637bbe2e40146100715780639b71b3dc1461006c578063ace06d21146100675763d1f9c24d03610085576102f1565b6102b1565b610237565b61020a565b610191565b610136565b6100dc565b5f80fd5b6001600160a01b031690565b90565b6001600160a01b0381165b0361008557565b905035906100b782610098565b565b9190604083820312610085576100959060206100d582866100aa565b94016100aa565b34610085576100f56100ef3660046100b9565b90610453565b60405180805b0390f35b5f91031261008557565b610095916008021c65ffffffffffff1690565b906100959154610109565b6100955f600e61011c565b9052565b34610085576101463660046100ff565b6100fb610151610127565b6040519182918265ffffffffffff909116815260200190565b610095916008021c5b62ffffff1690565b90610095915461016a565b610095601a5f61017b565b34610085576101a13660046100ff565b6100fb6101ac610186565b6040519182918262ffffff909116815260200190565b62ffffff81166100a3565b905035906100b7826101c2565b9091606082840312610085576100956101f384846100aa565b93604061020382602087016100aa565b94016101cd565b34610085576100f561021d3660046101da565b91610711565b9060208282031261008557610095916100aa565b34610085576100fb61025261024d366004610223565b61097a565b6040519182918290815260200190565b806100a3565b905035906100b782610262565b6080818303126100855761028982826100aa565b9261009561029a84602085016100aa565b9360606102aa82604087016100aa565b9401610268565b34610085576100f56102c4366004610275565b92919091610b02565b610095916008021c60ff1690565b9061009591546102cd565b610095601f5f6102db565b34610085576103013660046100ff565b6100fb61030c6102e6565b6040519182918260ff909116815260200190565b61009590610089906001600160a01b031682565b61009590610320565b61009590610334565b634e487b7160e01b5f52604160045260245ffd5b90601f01601f1916810190811067ffffffffffffffff82111761037c57604052565b610346565b6040513d5f823e3d90fd5b9060ff60a01b9060a01b5b9181191691161790565b906103b16100956103b892151590565b825461038c565b9055565b6100956100956100959290565b905f1990610397565b906103e26100956103b8926103bc565b82546103c9565b905051906100b782610262565b9060208282031261008557610095916103e9565b6001600160a01b03909116815260200190565b610132906103bc565b60409061044c6100b7949695939661044560608401985f85019061041d565b6020830152565b019061041d565b61045f6104649161033d565b61033d565b90813b15610085576040516308830d0760e11b8152905f8260048183875af19081156105ab576105049261045f926105e1575b506104a46001600f6103a1565b61045f6104b05f6103bc565b6104bb81600c6103d2565b6104c68160046103d2565b6104d18160056103d2565b6104dc8160066103d2565b6104e78160146103d2565b6104f28160086103d2565b6104fd8160096103d2565b60076103d2565b61050d3061033d565b602061051860405190565b9283906370a0823160e01b82528180610534866004830161040a565b03915afa9182156105ab575f926105b0575b50319063e291388892803b15610085576105775f9493859461058361056a60405190565b9788968795869460e01b90565b84528160048501610426565b03925af180156105ab576105945750565b6100b7905f6105a3818361035a565b8101906100ff565b610381565b6105d391925060203d6020116105da575b6105cb818361035a565b8101906103f6565b905f610546565b503d6105c1565b6105f0905f6105a3818361035a565b5f610497565b6101736100956100959290565b634e487b7160e01b5f52601260045260245ffd5b61062a9062ffffff165b9162ffffff1690565b908115610635570690565b610603565b61ffff81166100a3565b905051906100b78261063a565b906020828203126100855761009591610644565b6106726100956100959290565b61ffff1690565b6100959081565b6100959054610679565b634e487b7160e01b5f52601160045260245ffd5b919082039182116106ab57565b61068a565b919082018092116106ab57565b6100956100956100959261ffff1690565b818102929181159184041417156106ab57565b8115610635570490565b610095662386f26fc100006103bc565b6100896100956100959290565b610095906106fb565b90916107279061072160646105f6565b90610617565b61073160636105f6565b62ffffff821614908115610965575b506108ef5761045f6107519161033d565b602061075c60405190565b631135906b60e11b815291829060049082905afa9081156105ab575f91610936575b506107885f610665565b61ffff8216146108ef576127109161079f83610665565b61ffff8316116109315761045f6107b59161033d565b916107bf3061033d565b906107c960405190565b916370a0823160e01b8352602083806107e5846004830161040a565b0381885afa9283156105ab575f93610910575b5031906108045f6103bc565b8214610909576108146014610680565b91828111156109015761084a610830610856946108509361069e565b9561084461083e88886106b0565b916106bd565b906106ce565b916103bc565b906106e1565b90808211156108fb576108689161069e565b90808210156108f35750905b61087f6100956106eb565b82106108ef576108c0916020916108b563a1903eab9261089e5f610708565b936108a860405190565b9687958694859360e01b90565b83526004830161040a565b03925af190816108d2575b506100b757565b6108ea9060203d6020116105da576105cb818361035a565b6108cb565b5050565b905090610874565b50505050565b505050505050565b5050505050565b61092a91935060203d6020116105da576105cb818361035a565b915f6107f8565b505050565b610958915060203d60201161095e575b610950818361035a565b810190610651565b5f61077e565b503d610946565b90506109736106215f6105f6565b145f610740565b61045f61098e916109885f90565b5061033d565b6109973061033d565b60206109a260405190565b9283906370a0823160e01b825281806109be866004830161040a565b03915afa9182156105ab575f92610a8d575b503190610a17610a0d610a036109f96109e96004610680565b6109f36005610680565b906106b0565b6109f36006610680565b6109f36014610680565b6109f3600c610680565b9081610a236009610680565b90610a2d5f6103bc565b8203610a83575b5050610a406008610680565b610a495f6103bc565b8103610a78575b50610a5b91926106b0565b9080821115610a6d576100959161069e565b50506100955f6103bc565b610a5b920191610a50565b0191505f80610a34565b610aa791925060203d6020116105da576105cb818361035a565b905f6109d0565b610095683635c9adc5dea000006103bc565b546001600160801b031690565b610095610095610095926001600160801b031690565b9081526060810193926100b7929091604091610afe90610445565b0152565b61045f610b15610b1b929594939561033d565b9461033d565b906370a0823193610b2b3061033d565b93610b3560405190565b94610b408760e01b90565b865260208680610b53846004830161040a565b0381885afa9586156105ab575f9661107f575b50803196610b74600c610680565b928395610b816006610680565b809a610ba087610b9b610a0385610b9b6109e96004610680565b6106b0565b80610bab6009610680565b90610bb55f6103bc565b8203611075575b5050610bc86008610680565b610bd15f6103bc565b810361106e575b50610be38c836106b0565b908082111561105d57610bf59161069e565b935b610c2e610c24610c12610c0a6003610680565b610844610aae565b610850610c1f6002610ac0565b610acd565b61085060146103bc565b98610c50610c45610c3f60046103bc565b886106e1565b9661085060146103bc565b945f99610c5c5f6103bc565b88148061104c575b15610fe557610c725f6103bc565b975b81891115610fd757610c86828a61069e565b80821015610fd1575080915b610c9b5f6103bc565b8303610fb4575b509c9d9c035b8a948b9f610cb55f6103bc565b8303610f70575b505050610cc85f6103bc565b8b03610efd575b50610cd99061033d565b9863e29138889c8a3b1561008557610d068e610d115f95610cf960405190565b9788968795869560e01b90565b855260048501610ae3565b03918c5af180156105ab57610ee8575b50610d2b5f6103bc565b8203610ed5575b5050610d3b8190565b8711610d91575b5050505050509050610d57610095600c610680565b8103610d80575b50610d6c6100956006610680565b8103610d755750565b6100b79060066103d2565b610d8b90600c6103d2565b5f610d5e565b610db59291610da26020928961069e565b96610dac60405190565b94859260e01b90565b82528180610dc6866004830161040a565b03915afa9182156105ab575f92610eb4575b5031915083811015610ea957610def90809461069e565b80821015610ea15750905b610e035f6103bc565b8314158015610e8f575b610e1a575b808080610d42565b803b1561008557610e39945f91610e3060405190565b96879260e01b90565b8252818481610e4d86898160048501610426565b03925af19182156105ab57610e7194610e6b93610e7a575b506106b0565b9061069e565b805f8080610e12565b610e89905f6105a3818361035a565b5f610e65565b50610e995f6103bc565b821415610e0d565b905090610dfa565b50610def838061069e565b610ece91925060203d6020116105da576105cb818361035a565b905f610dd8565b610ee0929a506106b0565b975f80610d32565b610ef7905f6105a3818361035a565b5f610d21565b61045f610f099161033d565b90813b15610085575f610f4081938d610f2160405190565b958693849283919063e7640d4960e01b5b835260048301526024820190565b03925af19182156105ab57610cd992610f5b575b5090610ccf565b610f6a905f6105a3818361035a565b5f610f54565b919550919e50610f7d8590565b811015610faa57610f90905b809561069e565b80821015610fa357505b9c5f8080610cbc565b9050610f9a565b50610f9084610f89565b82610ca893929f509e9f9e610fc8916106b0565b9d9e9091610ca2565b91610c92565b610fe05f6103bc565b610c86565b6110146020610ff48a846106b0565b610ffd8661033d565b604051938492839182916335c298d960e11b610f32565b03915afa9081156105ab575f9161102d575b5097610c74565b611046915060203d6020116105da576105cb818361035a565b5f611026565b506110565f6103bc565b8114610c64565b50506110685f6103bc565b93610bf7565b015f610bd8565b0190505f80610bbc565b61109991965060203d6020116105da576105cb818361035a565b945f610b6656fea2646970667358221220977be15c7967b2c99868796ae88cae01afd2753e0fca9c7b2c754ecc7f86356164736f6c634300081e0033","sourceMap":"3907:16450:35:-:0;;;;;;;;:::i;:::-;;;;;;;;;;;;;;;;;:::i;:::-;:::o;:::-;;;;;;;;;;;;;:::o;:::-;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;;;;:::i;:::-;;;:::o;:::-;;-1:-1:-1;;;3907:16450:35;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;;;;:::i;:::-;;-1:-1:-1;;;3907:16450:35;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;;;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;;;;:::i;:::-;;;;;;;;;;;;;;;;;;;;:::i;:::-;;;;:::i;:::-;;-1:-1:-1;;;3907:16450:35;;;;;;;;;;;;:::i;:::-;;;;:::i;:::-;;-1:-1:-1;;;;;3907:16450:35;;;;;;;;;;;-1:-1:-1;;;;;3907:16450:35;;;;;;;;;;:::i;:::-;;;;:::i;:::-;;-1:-1:-1;;3907:16450:35;;;;;;;;;;;;;;;;;:::i;:::-;;;;:::i;6993:20521:39:-;8556:16;;;;:::i;:::-;14334:4;10488:1;;;;;:::i;:::-;10850:3;;;;:::i;:::-;11416:1;;;;:::i;:::-;13422:4;;;;:::i;:::-;14334;;:::i;:::-;16322:11;;;;:::i;:::-;16969:9;;;;:::i","linkReferences":{}},"deployedBytecode":{"object":"0x60806040526004361015610011575f80fd5b5f3560e01c806338850ed914610080578063607ad0d71461007b5780636fd5ae15146100765780637bbe2e40146100715780639b71b3dc1461006c578063ace06d21146100675763d1f9c24d03610085576102f1565b6102b1565b610237565b61020a565b610191565b610136565b6100dc565b5f80fd5b6001600160a01b031690565b90565b6001600160a01b0381165b0361008557565b905035906100b782610098565b565b9190604083820312610085576100959060206100d582866100aa565b94016100aa565b34610085576100f56100ef3660046100b9565b90610453565b60405180805b0390f35b5f91031261008557565b610095916008021c65ffffffffffff1690565b906100959154610109565b6100955f600e61011c565b9052565b34610085576101463660046100ff565b6100fb610151610127565b6040519182918265ffffffffffff909116815260200190565b610095916008021c5b62ffffff1690565b90610095915461016a565b610095601a5f61017b565b34610085576101a13660046100ff565b6100fb6101ac610186565b6040519182918262ffffff909116815260200190565b62ffffff81166100a3565b905035906100b7826101c2565b9091606082840312610085576100956101f384846100aa565b93604061020382602087016100aa565b94016101cd565b34610085576100f561021d3660046101da565b91610711565b9060208282031261008557610095916100aa565b34610085576100fb61025261024d366004610223565b61097a565b6040519182918290815260200190565b806100a3565b905035906100b782610262565b6080818303126100855761028982826100aa565b9261009561029a84602085016100aa565b9360606102aa82604087016100aa565b9401610268565b34610085576100f56102c4366004610275565b92919091610b02565b610095916008021c60ff1690565b9061009591546102cd565b610095601f5f6102db565b34610085576103013660046100ff565b6100fb61030c6102e6565b6040519182918260ff909116815260200190565b61009590610089906001600160a01b031682565b61009590610320565b61009590610334565b634e487b7160e01b5f52604160045260245ffd5b90601f01601f1916810190811067ffffffffffffffff82111761037c57604052565b610346565b6040513d5f823e3d90fd5b9060ff60a01b9060a01b5b9181191691161790565b906103b16100956103b892151590565b825461038c565b9055565b6100956100956100959290565b905f1990610397565b906103e26100956103b8926103bc565b82546103c9565b905051906100b782610262565b9060208282031261008557610095916103e9565b6001600160a01b03909116815260200190565b610132906103bc565b60409061044c6100b7949695939661044560608401985f85019061041d565b6020830152565b019061041d565b61045f6104649161033d565b61033d565b90813b15610085576040516308830d0760e11b8152905f8260048183875af19081156105ab576105049261045f926105e1575b506104a46001600f6103a1565b61045f6104b05f6103bc565b6104bb81600c6103d2565b6104c68160046103d2565b6104d18160056103d2565b6104dc8160066103d2565b6104e78160146103d2565b6104f28160086103d2565b6104fd8160096103d2565b60076103d2565b61050d3061033d565b602061051860405190565b9283906370a0823160e01b82528180610534866004830161040a565b03915afa9182156105ab575f926105b0575b50319063e291388892803b15610085576105775f9493859461058361056a60405190565b9788968795869460e01b90565b84528160048501610426565b03925af180156105ab576105945750565b6100b7905f6105a3818361035a565b8101906100ff565b610381565b6105d391925060203d6020116105da575b6105cb818361035a565b8101906103f6565b905f610546565b503d6105c1565b6105f0905f6105a3818361035a565b5f610497565b6101736100956100959290565b634e487b7160e01b5f52601260045260245ffd5b61062a9062ffffff165b9162ffffff1690565b908115610635570690565b610603565b61ffff81166100a3565b905051906100b78261063a565b906020828203126100855761009591610644565b6106726100956100959290565b61ffff1690565b6100959081565b6100959054610679565b634e487b7160e01b5f52601160045260245ffd5b919082039182116106ab57565b61068a565b919082018092116106ab57565b6100956100956100959261ffff1690565b818102929181159184041417156106ab57565b8115610635570490565b610095662386f26fc100006103bc565b6100896100956100959290565b610095906106fb565b90916107279061072160646105f6565b90610617565b61073160636105f6565b62ffffff821614908115610965575b506108ef5761045f6107519161033d565b602061075c60405190565b631135906b60e11b815291829060049082905afa9081156105ab575f91610936575b506107885f610665565b61ffff8216146108ef576127109161079f83610665565b61ffff8316116109315761045f6107b59161033d565b916107bf3061033d565b906107c960405190565b916370a0823160e01b8352602083806107e5846004830161040a565b0381885afa9283156105ab575f93610910575b5031906108045f6103bc565b8214610909576108146014610680565b91828111156109015761084a610830610856946108509361069e565b9561084461083e88886106b0565b916106bd565b906106ce565b916103bc565b906106e1565b90808211156108fb576108689161069e565b90808210156108f35750905b61087f6100956106eb565b82106108ef576108c0916020916108b563a1903eab9261089e5f610708565b936108a860405190565b9687958694859360e01b90565b83526004830161040a565b03925af190816108d2575b506100b757565b6108ea9060203d6020116105da576105cb818361035a565b6108cb565b5050565b905090610874565b50505050565b505050505050565b5050505050565b61092a91935060203d6020116105da576105cb818361035a565b915f6107f8565b505050565b610958915060203d60201161095e575b610950818361035a565b810190610651565b5f61077e565b503d610946565b90506109736106215f6105f6565b145f610740565b61045f61098e916109885f90565b5061033d565b6109973061033d565b60206109a260405190565b9283906370a0823160e01b825281806109be866004830161040a565b03915afa9182156105ab575f92610a8d575b503190610a17610a0d610a036109f96109e96004610680565b6109f36005610680565b906106b0565b6109f36006610680565b6109f36014610680565b6109f3600c610680565b9081610a236009610680565b90610a2d5f6103bc565b8203610a83575b5050610a406008610680565b610a495f6103bc565b8103610a78575b50610a5b91926106b0565b9080821115610a6d576100959161069e565b50506100955f6103bc565b610a5b920191610a50565b0191505f80610a34565b610aa791925060203d6020116105da576105cb818361035a565b905f6109d0565b610095683635c9adc5dea000006103bc565b546001600160801b031690565b610095610095610095926001600160801b031690565b9081526060810193926100b7929091604091610afe90610445565b0152565b61045f610b15610b1b929594939561033d565b9461033d565b906370a0823193610b2b3061033d565b93610b3560405190565b94610b408760e01b90565b865260208680610b53846004830161040a565b0381885afa9586156105ab575f9661107f575b50803196610b74600c610680565b928395610b816006610680565b809a610ba087610b9b610a0385610b9b6109e96004610680565b6106b0565b80610bab6009610680565b90610bb55f6103bc565b8203611075575b5050610bc86008610680565b610bd15f6103bc565b810361106e575b50610be38c836106b0565b908082111561105d57610bf59161069e565b935b610c2e610c24610c12610c0a6003610680565b610844610aae565b610850610c1f6002610ac0565b610acd565b61085060146103bc565b98610c50610c45610c3f60046103bc565b886106e1565b9661085060146103bc565b945f99610c5c5f6103bc565b88148061104c575b15610fe557610c725f6103bc565b975b81891115610fd757610c86828a61069e565b80821015610fd1575080915b610c9b5f6103bc565b8303610fb4575b509c9d9c035b8a948b9f610cb55f6103bc565b8303610f70575b505050610cc85f6103bc565b8b03610efd575b50610cd99061033d565b9863e29138889c8a3b1561008557610d068e610d115f95610cf960405190565b9788968795869560e01b90565b855260048501610ae3565b03918c5af180156105ab57610ee8575b50610d2b5f6103bc565b8203610ed5575b5050610d3b8190565b8711610d91575b5050505050509050610d57610095600c610680565b8103610d80575b50610d6c6100956006610680565b8103610d755750565b6100b79060066103d2565b610d8b90600c6103d2565b5f610d5e565b610db59291610da26020928961069e565b96610dac60405190565b94859260e01b90565b82528180610dc6866004830161040a565b03915afa9182156105ab575f92610eb4575b5031915083811015610ea957610def90809461069e565b80821015610ea15750905b610e035f6103bc565b8314158015610e8f575b610e1a575b808080610d42565b803b1561008557610e39945f91610e3060405190565b96879260e01b90565b8252818481610e4d86898160048501610426565b03925af19182156105ab57610e7194610e6b93610e7a575b506106b0565b9061069e565b805f8080610e12565b610e89905f6105a3818361035a565b5f610e65565b50610e995f6103bc565b821415610e0d565b905090610dfa565b50610def838061069e565b610ece91925060203d6020116105da576105cb818361035a565b905f610dd8565b610ee0929a506106b0565b975f80610d32565b610ef7905f6105a3818361035a565b5f610d21565b61045f610f099161033d565b90813b15610085575f610f4081938d610f2160405190565b958693849283919063e7640d4960e01b5b835260048301526024820190565b03925af19182156105ab57610cd992610f5b575b5090610ccf565b610f6a905f6105a3818361035a565b5f610f54565b919550919e50610f7d8590565b811015610faa57610f90905b809561069e565b80821015610fa357505b9c5f8080610cbc565b9050610f9a565b50610f9084610f89565b82610ca893929f509e9f9e610fc8916106b0565b9d9e9091610ca2565b91610c92565b610fe05f6103bc565b610c86565b6110146020610ff48a846106b0565b610ffd8661033d565b604051938492839182916335c298d960e11b610f32565b03915afa9081156105ab575f9161102d575b5097610c74565b611046915060203d6020116105da576105cb818361035a565b5f611026565b506110565f6103bc565b8114610c64565b50506110685f6103bc565b93610bf7565b015f610bd8565b0190505f80610bbc565b61109991965060203d6020116105da576105cb818361035a565b945f610b6656fea2646970667358221220977be15c7967b2c99868796ae88cae01afd2753e0fca9c7b2c754ecc7f86356164736f6c634300081e0033","sourceMap":"3907:16450:35:-:0;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;;:::i;:::-;;:::i;:::-;;:::i;:::-;;:::i;:::-;;:::i;:::-;;:::i;:::-;;;;;-1:-1:-1;;;;;3907:16450:35;;:::o;:::-;;:::o;:::-;-1:-1:-1;;;;;3907:16450:35;;;;;;:::o;:::-;;;;;;;;:::i;:::-;:::o;:::-;;;;;;;;;;;;;;;;;:::i;:::-;;;;:::i;:::-;;;;;;;;;:::i;:::-;;;:::i;:::-;;;;;;;;;;;;;;;;:::o;:::-;;;;;;;;;;;;;;;;:::i;19612:29:39:-;;;;;:::i;3907:16450:35:-;;;:::o;:::-;;;;;;;;:::i;:::-;;;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;10466:23:39:-;;;;;:::i;3907:16450:35:-;;;;;;;;:::i;:::-;;;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;;;;;;;;;;;;;;;:::i;:::-;;;;;;;;;:::i;:::-;;;;:::i;:::-;;;;;;;;;:::i;:::-;;;:::i;:::-;;;;;;;;;;;;:::i;:::-;;;;;;;;;;:::i;:::-;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;;;;;;;;;;;;:::i;:::-;;;;;;;;;:::i;:::-;;;;;;;;;:::i;:::-;;;;:::i;:::-;;;;;;;;;:::i;:::-;;;;;;:::i;:::-;;;;;;;;;;;;;;;;:::i;11391:26:39:-;;;;;:::i;3907:16450:35:-;;;;;;;;:::i;:::-;;;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;;;;3907:16450:35;;;;;;;:::i;:::-;;;;:::i;:::-;;;;;;;;;;;;;;;;-1:-1:-1;;3907:16450:35;;;;;;;;;;;;;;:::o;:::-;;:::i;:::-;;;;;;;;;;;;-1:-1:-1;;;3907:16450:35;;;;;;;;;;;;:::o;:::-;;;;;;;;;;;;;;:::i;:::-;;;:::o;:::-;;;;;;;;;-1:-1:-1;;3907:16450:35;;;;;;;;;;:::i;:::-;;;;:::i;:::-;;;;;;;;:::i;:::-;;;;;;;;;;;;:::i;:::-;-1:-1:-1;;;;;3907:16450:35;;;;;;;;:::o;:::-;;;;:::i;:::-;;;;;;;;;;;;;;;;;;;;:::i;:::-;;;;;;;;;;:::i;18947:1408::-;19048:17;19144:27;18947:1408;19048:17;:::i;:::-;19144:27;:::i;:::-;:29;;;;;;3907:16450;;-1:-1:-1;;;19144:29:35;;3907:16450;19144:29;3907:16450;19144:29;3907:16450;19144:29;;;;;;;;;20050:31;19144:29;20050:21;19144:29;;;18947:1408;19477:19;;19492:4;19477:19;;:::i;:::-;19790:20;19551:12;19562:1;19551:12;:::i;:::-;;;;;:::i;:::-;19573:20;;;;:::i;:::-;19603:17;;;;:::i;:::-;19630:14;;;;:::i;:::-;19654:17;;;;:::i;:::-;19728:24;;;;:::i;:::-;19762:18;;;;:::i;:::-;19790:20;;:::i;20050:31::-;20082:13;20090:4;20082:13;:::i;:::-;20050:46;;3907:16450;;;;20050:46;;;;-1:-1:-1;;;20050:46:35;;;;;;;;;;:::i;:::-;;;;;;;;;;19562:1;20050:46;;;18947:1408;20123:21;;20299;;:49;;;;;;;19562:1;20299:49;;;;;;3907:16450;;;;20299:49;;;;;;;;3907:16450;;;;20299:49;;;;;;;;:::i;:::-;;;;;;;;;;;18947:1408;:::o;20299:49::-;;;19562:1;20299:49;;;;:::i;:::-;;;;;:::i;:::-;;:::i;20050:46::-;;;;;;;;;;;;;;;;:::i;:::-;;;;;:::i;:::-;;;;;;;;;;19144:29;;;;;;;;:::i;:::-;;;;3907:16450;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::o;:::-;;:::i;:::-;;;;;;;;;;;;;;:::i;:::-;;;;;;;;;;;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;:::o;:::-;;:::i;:::-;;;;;;;;;;:::o;:::-;;;;;;;;;;;;;;;;;;;;;;;;;:::o;:::-;;;;;;;:::o;4051:47::-;4088:10;;;:::i;:::-;;;;;3907:16450;;4088:10;;;;:::i;14655:2546::-;;;14859:9;14655:2546;14859:9;14865:3;14859:9;:::i;:::-;;;:::i;:::-;14882:11;14891:2;14882:11;:::i;:::-;3907:16450;;;14882:11;:25;;;;;14655:2546;14878:38;;;15003:17;:38;:17;;:::i;:38::-;:40;;3907:16450;;;;15003:40;-1:-1:-1;;;15003:40:35;;;;;;;;;;;;;;;;-1:-1:-1;15003:40:35;;;14655:2546;15057:14;;15070:1;15057:14;:::i;:::-;3907:16450;;;15057:14;15053:27;;15125:6;15113:18;;;;:::i;:::-;3907:16450;;;15113:18;15109:31;;15190:21;:31;:21;;:::i;:31::-;15230:4;15222:13;15230:4;15222:13;:::i;:::-;15190:46;;3907:16450;;;;15190:46;;-1:-1:-1;;;15190:46:35;;;;;;;;;;;:::i;:::-;;;;;;;;;;;15070:1;15190:46;;;14655:2546;15263:21;;15298:11;;15070:1;15298:11;:::i;:::-;;;15294:24;;15600:13;;;:::i;:::-;15627:20;;;;;15623:33;;16051:35;15717:19;16050:46;15717:19;16050:46;15717:19;;:::i;:::-;16001:20;16068:18;16001:20;;;;:::i;:::-;16068:18;;:::i;:::-;16051:35;;:::i;:::-;16050:46;;:::i;:::-;;;:::i;:::-;16169:17;;;;;16165:30;;16222:16;;;:::i;:::-;16320:21;;;;:45;;;;;;16379:20;16390:9;;:::i;16379:20::-;;;16375:33;;16679:57;:28;:57;:28;:57;:28;16725:10;;15070:1;16725:10;:::i;:::-;16679:57;;3907:16450;;;;16679:57;;;;;;;;3907:16450;;;;16679:57;;;;;;;:::i;:::-;;;;;;;;;16320:45;-1:-1:-1;16675:520:35;;14655:2546::o;16679:57::-;;;;;;;;;;;;;:::i;:::-;;;16375:33;16401:7;;:::o;16320:45::-;;;;;;16165:30;16188:7;;;;:::o;15623:33::-;15649:7;;;;;;:::o;15294:24::-;15311:7;;;;;:::o;15190:46::-;;;;;;;;;;;;;;;:::i;:::-;;;;;15109:31;15133:7;;;:::o;15003:40::-;;;;;;;;;;;;;;;:::i;:::-;;;;;:::i;:::-;;;;;;;;;14882:25;14897:10;;;;14906:1;14897:10;:::i;:::-;;14882:25;;;12420:918;12520:21;:31;12420:918;12479:13;3907:16450;;;12479:13;12520:21;;:::i;:31::-;12552:13;12560:4;12552:13;:::i;:::-;12520:46;;3907:16450;;;;12520:46;;;;-1:-1:-1;;;12520:46:35;;;;;;;;;;:::i;:::-;;;;;;;;;;-1:-1:-1;12520:46:35;;;12420:918;12593:21;;12686:16;:72;:61;:45;:32;:16;;;:::i;:::-;12705:13;;;:::i;:::-;12686:32;;:::i;:::-;12721:10;;;:::i;12686:45::-;12734:13;;;:::i;12686:61::-;12750:8;;;:::i;12686:72::-;12664:94;;12867:14;;;:::i;:::-;12895:12;;12906:1;12895:12;:::i;:::-;;;12891:107;;12420:918;13025:20;;;;;:::i;:::-;13059:12;12906:1;13059:12;:::i;:::-;;;13055:107;;12420:918;13248:14;;;;;:::i;:::-;13280:22;;;;:51;;;13305:22;;;:::i;13280:51::-;;;;12906:1;13280:51;:::i;13055:107::-;13248:14;;3907:16450;13055:107;;;12891;3907:16450;;-1:-1:-1;12891:107:35;;;;12520:46;;;;;;;;;;;;;;;:::i;:::-;;;;;7431:54:39;7475:10;;;:::i;:::-;;-1:-1:-1;;;;;7475:10:39;3907:16450:35;:::o;7475:10:39:-;;;;;-1:-1:-1;;;;;7475:10:39;;;;3907:16450:35;;;7475:10:39;;;;;;;;;;;;;;3907:16450:35;7475:10:39;;3907:16450:35;;5450:6271;5856:21;5584:17;5856:31;5450:6271;;;;;5584:17;:::i;:::-;5856:21;;:::i;:31::-;;;5896:4;5888:13;5896:4;5888:13;:::i;:::-;5856:46;;3907:16450;;;;5856:46;;;;3907:16450;;;;5856:46;;;;;;;;;;;;:::i;:::-;;;;;;;;;;;-1:-1:-1;5856:46:35;;;5450:6271;5929:21;;;6034:8;;;;:::i;:::-;6010:32;;6078:10;;;;:::i;:::-;6052:36;6188:16;:82;:16;:66;:50;:16;:32;:16;;;:::i;:32::-;:50;:::i;:82::-;6166:104;6389:14;;;:::i;:::-;6417:12;;6428:1;6417:12;:::i;:::-;;;6413:107;;5450:6271;6547:20;;;;;:::i;:::-;6581:12;6428:1;6581:12;:::i;:::-;;;6577:107;;5450:6271;6785:14;;;;;:::i;:::-;6830:22;;;;:51;;;6855:22;;;:::i;:::-;6830:51;;7343:14;7280:41;7281:31;:13;;;:::i;:::-;7297:15;;:::i;7281:31::-;7280:41;7316:5;;;:::i;:::-;7280:41;:::i;:::-;7343:14;7355:2;7343:14;:::i;:::-;7331:26;7518:15;7456:14;;7469:1;7456:14;:::i;:::-;;;:::i;:::-;7518:15;;7355:2;7518:15;:::i;:::-;7943:16;3907:16450;7943:16;7973:13;6428:1;7973:13;:::i;:::-;;;:35;;;6830:51;7969:294;;;8089:12;6428:1;8089:12;:::i;:::-;7969:294;;8367:24;;;:55;;;8394:24;;;;:::i;:::-;8527:20;;;:43;;;;;;;8584:15;6428:1;8584:15;:::i;:::-;;;8580:73;;8527:43;-1:-1:-1;9012:16:35;;;7475:10:39;9073:21:35;9181:15;9206:16;;9236:13;;6428:1;9236:13;:::i;:::-;;;9232:297;;8527:43;9612:14;;;;6428:1;9612:14;:::i;:::-;;;9608:94;;8527:43;9792:21;;;;:::i;:::-;;;:67;;;;;;;;;6428:1;9792:67;;3907:16450;;;;9792:67;;;;;;;;3907:16450;;;;9792:67;;;7469:1;9792:67;;;:::i;:::-;;;;;;;;;;;;8527:43;9936:16;;6428:1;9936:16;:::i;:::-;;;9932:77;;8527:43;10389:24;;;;3907:16450;;10389:24;;;10385:906;;8527:43;11559:8;;;;;;;;11542:25;11559:8;;;:::i;11542:25::-;;;11538:80;;8527:43;11650:10;11631:29;11650:10;;;:::i;11631:29::-;;;11627:88;;5450:6271;:::o;11627:88::-;11676:28;;;;:::i;11538:80::-;11583:24;;;;:::i;:::-;11538:80;;;10385:906;10582:46;10446:24;;;10582:46;10446:24;;;:::i;:::-;10582:46;;3907:16450;;;;10582:46;;;;3907:16450;;;;10582:46;;;;;;;7469:1;10582:46;;;:::i;:::-;;;;;;;;;;6428:1;10582:46;;;10385:906;-1:-1:-1;10664:21:35;;-1:-1:-1;10861:22:35;;;:47;;;10922:19;10861:47;;;10922:19;:::i;:::-;10965:23;;;:49;;;;;;11033:11;6428:1;11033:11;:::i;:::-;;;;:27;;;;10965:49;11029:252;;10965:49;10385:906;;;;;11029:252;11162:51;;;;;;;6428:1;11162:51;;3907:16450;;;;11162:51;;;;3907:16450;;;;11162:51;;;;;;;;;;7469:1;11162:51;;;:::i;:::-;;;;;;;;;;11231:35;11162:51;11249:16;11162:51;;;11029:252;11249:16;;:::i;:::-;11231:35;;:::i;:::-;11029:252;;;;;;11162:51;;;6428:1;11162:51;;;;:::i;:::-;;;;11033:27;11048:12;;6428:1;11048:12;:::i;:::-;;;;11033:27;;10965:49;;;;;;10861:47;-1:-1:-1;10922:19:35;10861:47;;10922:19;:::i;10582:46::-;;;;;;;;;;;;;;;:::i;:::-;;;;;9932:77;9968:30;;;;;:::i;:::-;9932:77;;;;;9792:67;;;6428:1;9792:67;;;;:::i;:::-;;;;9608:94;9642:26;:38;:26;;:::i;:38::-;:49;;;;;;6428:1;9642:49;;;;;3907:16450;;;;9642:49;;;;;;;;;-1:-1:-1;;;9642:49:35;;;7469:1;9642:49;;3907:16450;;;;;;9642:49;;;;;;;;;;9792:21;9642:49;;;9608:94;;;;;9642:49;;;6428:1;9642:49;;;;:::i;:::-;;;;9232:297;9265:28;;;;;;9383:17;;3907:16450;;9383:17;;;:37;;;9434:20;9383:37;;9373:47;9434:20;;:::i;:::-;9479:18;;;:39;;;;;9232:297;;;;;;9479:39;;;;;9383:37;;9434:20;9383:37;;;8580:73;8615:27;9073:21;8615:27;;;;;;;;;;:::i;:::-;8580:73;;;;;;8527:43;;;;8367:55;;6428:1;8367:55;:::i;:::-;;;7969:294;8206:46;;8157:24;;;;:::i;:::-;8206:30;;;:::i;:::-;3907:16450;;8206:46;;;;;;;-1:-1:-1;;;8206:46:35;3907:16450;8206:46;;;;;;;;;;6428:1;8206:46;;;7969:294;8195:57;7969:294;;;8206:46;;;;;;;;;;;;;;:::i;:::-;;;;7973:35;7990:18;;6428:1;7990:18;:::i;:::-;;;7973:35;;6830:51;;;;6428:1;6830:51;:::i;:::-;;;;6577:107;3907:16450;6577:107;;;6413;3907:16450;;-1:-1:-1;6413:107:35;;;;5856:46;;;;;;;;;;;;;;;:::i;:::-;;;;","linkReferences":{}},"methodIdentifiers":{"bondUpkeep(address,address,address,uint256)":"ace06d21","deployTimestamp()":"607ad0d7","drainToBonds(address,address)":"38850ed9","gameState()":"d1f9c24d","level()":"6fd5ae15","stakeForTargetRatio(address,address,uint24)":"7bbe2e40","yieldPool(address)":"9b71b3dc"},"rawMetadata":"{\"compiler\":{\"version\":\"0.8.30+commit.73712a01\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[{\"internalType\":\"address\",\"name\":\"bondsAddr\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"stethAddr\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"coinAddr\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"rngWord\",\"type\":\"uint256\"}],\"name\":\"bondUpkeep\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"deployTimestamp\",\"outputs\":[{\"internalType\":\"uint48\",\"name\":\"\",\"type\":\"uint48\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"bondsAddr\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"stethAddr\",\"type\":\"address\"}],\"name\":\"drainToBonds\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"gameState\",\"outputs\":[{\"internalType\":\"uint8\",\"name\":\"\",\"type\":\"uint8\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"level\",\"outputs\":[{\"internalType\":\"uint24\",\"name\":\"\",\"type\":\"uint24\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"bondsAddr\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"stethAddr\",\"type\":\"address\"},{\"internalType\":\"uint24\",\"name\":\"lvl\",\"type\":\"uint24\"}],\"name\":\"stakeForTargetRatio\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"stethAddr\",\"type\":\"address\"}],\"name\":\"yieldPool\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"total\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"}],\"devdoc\":{\"author\":\"Burnie Degenerus\",\"details\":\"This module is called via `delegatecall` from DegenerusGame, meaning:      - All storage reads/writes operate on the game contract's storage      - `address(this)` refers to the game contract, not this module      - `msg.sender` is preserved from the original call to the game The module inherits DegenerusGameStorage to ensure identical slot layout. Any storage layout changes must be synchronized across all modules. ## Functions - `bondUpkeep`: Called during setup (state 1) to distribute yield and fund bonds - `yieldPool`: View helper to calculate untracked surplus (solvency buffer) - `stakeForTargetRatio`: Stake excess ETH into Lido stETH for yield generation - `drainToBonds`: Shutdown flow - transfer all assets to bonds for final resolution ## Yield Distribution (bondUpkeep) Untracked yield (assets - obligations) is distributed as: - 25% \\u2192 Bonds (first to cover shortfall in bondPool, remainder to vault) - 5%  \\u2192 Reward pool (future jackpot funding) - 70% \\u2192 Remains as untracked solvency buffer Additionally, 5% of lastPrizePool (in BURNIE) is minted for bond jackpots. ## Solvency Model The game maintains solvency via: - Tracked obligations: currentPrizePool + nextPrizePool + rewardPool + claimablePool + bondPool + specials - Assets: ETH balance + stETH balance - Invariant: assets >= obligations (enforced by never crediting more than received) - Buffer: untracked surplus grows from yield and provides safety margin\",\"kind\":\"dev\",\"methods\":{\"bondUpkeep(address,address,address,uint256)\":{\"details\":\"Called via delegatecall from DegenerusGame during state 1 (setup).      Executes once per level transition to:      1. Calculate yield (untracked surplus)      2. Distribute yield to bonds and reward pool      3. Mint BURNIE for bond jackpots      4. Sweep excess bondPool to vault\",\"params\":{\"bondsAddr\":\"Address of the DegenerusBonds contract.\",\"coinAddr\":\"Address of the DegenerusCoin contract.\",\"rngWord\":\"VRF entropy word for bond jackpot resolution. ## Yield Distribution Flow ``` Total Yield = (ETH + stETH) - obligations bondSkim (25%)  --+-- Fill bondPool shortfall (if any)                   +-- Send remainder to bonds for jackpots rewardTopUp (5%) ---- Add to rewardPool for future jackpots Unallocated (70%) --- Remains as solvency buffer ``` ## Bond Coverage Logic The bonds contract reports how much ETH is needed for upcoming maturities. If bondPool is under-funded, yield is used to fill the gap first. If bondPool is over-funded, excess is swept to the vault.\",\"stethAddr\":\"Address of the Lido stETH contract.\"}},\"drainToBonds(address,address)\":{\"details\":\"Called via delegatecall when game-over conditions are met:      - 365 days inactive after a level started, OR      - ~2.5 years from deploy if game never started      This is a one-way operation that:      1. Notifies bonds of shutdown (enables their resolution flow)      2. Zeros all game pools (prevents further credits)      3. Transfers ALL ETH + stETH to bonds for final distribution      After this call:      - Game enters state 86 (gameover)      - Bonds resolves maturities oldest-first with available funds      - Players have 1 year to claim from bonds      - Remainder swept to vault after grace period\",\"params\":{\"bondsAddr\":\"Address of the DegenerusBonds contract.\",\"stethAddr\":\"Address of the Lido stETH contract. ## Important: Unclaimed Winnings Setting claimablePool = 0 means any unclaimed player winnings are transferred to bonds. Players should claim before shutdown. The ~1 year warning period (from first inactivity signs) gives ample time to claim. ## Post-Shutdown Flow (in Bonds) ``` notifyGameOver() \\u2192 gameOverStarted = true                  \\u2192 disables new deposits/burns                  \\u2192 enables gameOver() resolution gameOver()       \\u2192 resolves maturities in order                  \\u2192 partial payouts if funds insufficient                  \\u2192 marks remaining series as resolved sweepExpiredPools() \\u2192 (1 year later) sends remainder to vault ```\"}},\"stakeForTargetRatio(address,address,uint24)\":{\"details\":\"Called via delegatecall during state transitions. Stakes ETH into Lido      to approach the admin-configured target ratio of stETH holdings.      The staking is conservative:      - Reserves claimablePool in ETH for immediate player withdrawals      - Only stakes if we're below target ratio      - Minimum stake of 0.01 ETH (Lido requirement)      - Skips levels 99/0 to avoid 100-level boundary complications      - Silently fails if Lido submission reverts (doesn't block game)\",\"params\":{\"bondsAddr\":\"Address of bonds contract (to query target ratio).\",\"lvl\":\"Current game level. ## Target Ratio Admin configures targetBps (0-10000) on bonds contract. - 0 = staking disabled - 5000 = target 50% stETH / 50% ETH - 10000 = target 100% stETH (except claimable reserve) ## Why Stake? stETH earns Lido staking rewards (~3-5% APY), which: - Grows the yield pool (untracked surplus) - Increases solvency buffer over time - Provides additional funding for jackpots via bondUpkeep distribution\",\"stethAddr\":\"Address of the Lido stETH contract.\"}},\"yieldPool(address)\":{\"details\":\"View function to compute: (ETH + stETH) - all tracked obligations.      This surplus exists because:      - stETH rebases upward from Lido yield      - Bond deposits with trackPool=false add assets without liabilities      - Rounding dust accumulates over time      The yield pool provides a safety margin ensuring the game can always      pay its obligations, even if individual pools are temporarily depleted.\",\"params\":{\"stethAddr\":\"Address of the Lido stETH contract.\"},\"returns\":{\"total\":\"Untracked balance (0 if obligations exceed assets).\"}}},\"title\":\"DegenerusGameBondModule\",\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{\"bondUpkeep(address,address,address,uint256)\":{\"notice\":\"Handle bond funding and yield distribution during setup maintenance.\"},\"drainToBonds(address,address)\":{\"notice\":\"Execute game-over shutdown: drain all assets to bonds.\"},\"stakeForTargetRatio(address,address,uint24)\":{\"notice\":\"Stake excess ETH into Lido stETH to earn yield.\"},\"yieldPool(address)\":{\"notice\":\"Calculate untracked funds (the solvency buffer).\"}},\"notice\":\"Delegate-called module handling bond-related operations for the game.\",\"version\":1}},\"settings\":{\"compilationTarget\":{\"contracts/modules/DegenerusGameBondModule.sol\":\"DegenerusGameBondModule\"},\"evmVersion\":\"prague\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"details\":{\"constantOptimizer\":true,\"cse\":true,\"deduplicate\":true,\"inliner\":true,\"jumpdestRemover\":true,\"orderLiterals\":true,\"peephole\":true,\"simpleCounterForLoopUncheckedIncrement\":true,\"yul\":true,\"yulDetails\":{\"optimizerSteps\":\"dhfoDgvulfnTUtnIf:fDnTOcmuO\",\"stackAllocation\":true}},\"runs\":200},\"remappings\":[\":@arbitrum/=node_modules/@arbitrum/\",\":@chainlink/=node_modules/@chainlink/\",\":@eth-optimism/=node_modules/@chainlink/contracts/node_modules/@eth-optimism/\",\":@offchainlabs/=node_modules/@offchainlabs/\",\":@openzeppelin/=node_modules/@openzeppelin/\",\":@scroll-tech/=node_modules/@scroll-tech/\",\":@zksync/=node_modules/@zksync/\",\":erc721a/=node_modules/erc721a/\",\":hardhat/=node_modules/hardhat/\",\":solady/=node_modules/solady/\"],\"viaIR\":true},\"sources\":{\"contracts/ContractAddresses.sol\":{\"keccak256\":\"0x773c919574c05ba618701fedbdae4175a3605a5847981e752037c2278a0c06ed\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://d53147d50f52792abe4b0a369cfd5a0f17e0ad73d2ef9be739520b6771870f79\",\"dweb:/ipfs/QmYRCpkAjDpvN23n3jyzt2QtwgdDmVB7WT7X1ch6BCH2UV\"]},\"contracts/modules/DegenerusGameBondModule.sol\":{\"keccak256\":\"0x122afd7b4e9ba967a40db6b7fe5c748ba7e622d658413fad4ea39dde1acf8bff\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://de12a10abcb2e9f18e5827152bc73ee8513f43323b81e1d4f7754cf64e61e14d\",\"dweb:/ipfs/QmZMBh75adgaiRbY7UEMaboxW3MT5dsgFyF5zmvXM4YvRZ\"]},\"contracts/storage/DegenerusGameStorage.sol\":{\"keccak256\":\"0x9b320af7aaad31d3f5e13494556defe6f486dcf1a3671bd00a968ea85722c495\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://b7fa37b908354a14d763c71ed17ec8f16e79faa349b2fcf0dc37e3a5f164f74c\",\"dweb:/ipfs/QmaU1JST3a9a38zPJrghofJrW8n6AtNLkQR7xvU5VNQ5yU\"]}},\"version\":1}","metadata":{"compiler":{"version":"0.8.30+commit.73712a01"},"language":"Solidity","output":{"abi":[{"inputs":[{"internalType":"address","name":"bondsAddr","type":"address"},{"internalType":"address","name":"stethAddr","type":"address"},{"internalType":"address","name":"coinAddr","type":"address"},{"internalType":"uint256","name":"rngWord","type":"uint256"}],"stateMutability":"nonpayable","type":"function","name":"bondUpkeep"},{"inputs":[],"stateMutability":"view","type":"function","name":"deployTimestamp","outputs":[{"internalType":"uint48","name":"","type":"uint48"}]},{"inputs":[{"internalType":"address","name":"bondsAddr","type":"address"},{"internalType":"address","name":"stethAddr","type":"address"}],"stateMutability":"nonpayable","type":"function","name":"drainToBonds"},{"inputs":[],"stateMutability":"view","type":"function","name":"gameState","outputs":[{"internalType":"uint8","name":"","type":"uint8"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"level","outputs":[{"internalType":"uint24","name":"","type":"uint24"}]},{"inputs":[{"internalType":"address","name":"bondsAddr","type":"address"},{"internalType":"address","name":"stethAddr","type":"address"},{"internalType":"uint24","name":"lvl","type":"uint24"}],"stateMutability":"nonpayable","type":"function","name":"stakeForTargetRatio"},{"inputs":[{"internalType":"address","name":"stethAddr","type":"address"}],"stateMutability":"view","type":"function","name":"yieldPool","outputs":[{"internalType":"uint256","name":"total","type":"uint256"}]}],"devdoc":{"kind":"dev","methods":{"bondUpkeep(address,address,address,uint256)":{"details":"Called via delegatecall from DegenerusGame during state 1 (setup).      Executes once per level transition to:      1. Calculate yield (untracked surplus)      2. Distribute yield to bonds and reward pool      3. Mint BURNIE for bond jackpots      4. Sweep excess bondPool to vault","params":{"bondsAddr":"Address of the DegenerusBonds contract.","coinAddr":"Address of the DegenerusCoin contract.","rngWord":"VRF entropy word for bond jackpot resolution. ## Yield Distribution Flow ``` Total Yield = (ETH + stETH) - obligations bondSkim (25%)  --+-- Fill bondPool shortfall (if any)                   +-- Send remainder to bonds for jackpots rewardTopUp (5%) ---- Add to rewardPool for future jackpots Unallocated (70%) --- Remains as solvency buffer ``` ## Bond Coverage Logic The bonds contract reports how much ETH is needed for upcoming maturities. If bondPool is under-funded, yield is used to fill the gap first. If bondPool is over-funded, excess is swept to the vault.","stethAddr":"Address of the Lido stETH contract."}},"drainToBonds(address,address)":{"details":"Called via delegatecall when game-over conditions are met:      - 365 days inactive after a level started, OR      - ~2.5 years from deploy if game never started      This is a one-way operation that:      1. Notifies bonds of shutdown (enables their resolution flow)      2. Zeros all game pools (prevents further credits)      3. Transfers ALL ETH + stETH to bonds for final distribution      After this call:      - Game enters state 86 (gameover)      - Bonds resolves maturities oldest-first with available funds      - Players have 1 year to claim from bonds      - Remainder swept to vault after grace period","params":{"bondsAddr":"Address of the DegenerusBonds contract.","stethAddr":"Address of the Lido stETH contract. ## Important: Unclaimed Winnings Setting claimablePool = 0 means any unclaimed player winnings are transferred to bonds. Players should claim before shutdown. The ~1 year warning period (from first inactivity signs) gives ample time to claim. ## Post-Shutdown Flow (in Bonds) ``` notifyGameOver() → gameOverStarted = true                  → disables new deposits/burns                  → enables gameOver() resolution gameOver()       → resolves maturities in order                  → partial payouts if funds insufficient                  → marks remaining series as resolved sweepExpiredPools() → (1 year later) sends remainder to vault ```"}},"stakeForTargetRatio(address,address,uint24)":{"details":"Called via delegatecall during state transitions. Stakes ETH into Lido      to approach the admin-configured target ratio of stETH holdings.      The staking is conservative:      - Reserves claimablePool in ETH for immediate player withdrawals      - Only stakes if we're below target ratio      - Minimum stake of 0.01 ETH (Lido requirement)      - Skips levels 99/0 to avoid 100-level boundary complications      - Silently fails if Lido submission reverts (doesn't block game)","params":{"bondsAddr":"Address of bonds contract (to query target ratio).","lvl":"Current game level. ## Target Ratio Admin configures targetBps (0-10000) on bonds contract. - 0 = staking disabled - 5000 = target 50% stETH / 50% ETH - 10000 = target 100% stETH (except claimable reserve) ## Why Stake? stETH earns Lido staking rewards (~3-5% APY), which: - Grows the yield pool (untracked surplus) - Increases solvency buffer over time - Provides additional funding for jackpots via bondUpkeep distribution","stethAddr":"Address of the Lido stETH contract."}},"yieldPool(address)":{"details":"View function to compute: (ETH + stETH) - all tracked obligations.      This surplus exists because:      - stETH rebases upward from Lido yield      - Bond deposits with trackPool=false add assets without liabilities      - Rounding dust accumulates over time      The yield pool provides a safety margin ensuring the game can always      pay its obligations, even if individual pools are temporarily depleted.","params":{"stethAddr":"Address of the Lido stETH contract."},"returns":{"total":"Untracked balance (0 if obligations exceed assets)."}}},"version":1},"userdoc":{"kind":"user","methods":{"bondUpkeep(address,address,address,uint256)":{"notice":"Handle bond funding and yield distribution during setup maintenance."},"drainToBonds(address,address)":{"notice":"Execute game-over shutdown: drain all assets to bonds."},"stakeForTargetRatio(address,address,uint24)":{"notice":"Stake excess ETH into Lido stETH to earn yield."},"yieldPool(address)":{"notice":"Calculate untracked funds (the solvency buffer)."}},"version":1}},"settings":{"remappings":["@arbitrum/=node_modules/@arbitrum/","@chainlink/=node_modules/@chainlink/","@eth-optimism/=node_modules/@chainlink/contracts/node_modules/@eth-optimism/","@offchainlabs/=node_modules/@offchainlabs/","@openzeppelin/=node_modules/@openzeppelin/","@scroll-tech/=node_modules/@scroll-tech/","@zksync/=node_modules/@zksync/","erc721a/=node_modules/erc721a/","hardhat/=node_modules/hardhat/","solady/=node_modules/solady/"],"optimizer":{"runs":200,"details":{"peephole":true,"inliner":true,"jumpdestRemover":true,"orderLiterals":true,"deduplicate":true,"cse":true,"constantOptimizer":true,"yul":true,"yulDetails":{"stackAllocation":true,"optimizerSteps":"dhfoDgvulfnTUtnIf:fDnTOcmuO"},"simpleCounterForLoopUncheckedIncrement":true}},"metadata":{"bytecodeHash":"ipfs"},"compilationTarget":{"contracts/modules/DegenerusGameBondModule.sol":"DegenerusGameBondModule"},"evmVersion":"prague","libraries":{},"viaIR":true},"sources":{"contracts/ContractAddresses.sol":{"keccak256":"0x773c919574c05ba618701fedbdae4175a3605a5847981e752037c2278a0c06ed","urls":["bzz-raw://d53147d50f52792abe4b0a369cfd5a0f17e0ad73d2ef9be739520b6771870f79","dweb:/ipfs/QmYRCpkAjDpvN23n3jyzt2QtwgdDmVB7WT7X1ch6BCH2UV"],"license":"MIT"},"contracts/modules/DegenerusGameBondModule.sol":{"keccak256":"0x122afd7b4e9ba967a40db6b7fe5c748ba7e622d658413fad4ea39dde1acf8bff","urls":["bzz-raw://de12a10abcb2e9f18e5827152bc73ee8513f43323b81e1d4f7754cf64e61e14d","dweb:/ipfs/QmZMBh75adgaiRbY7UEMaboxW3MT5dsgFyF5zmvXM4YvRZ"],"license":"MIT"},"contracts/storage/DegenerusGameStorage.sol":{"keccak256":"0x9b320af7aaad31d3f5e13494556defe6f486dcf1a3671bd00a968ea85722c495","urls":["bzz-raw://b7fa37b908354a14d763c71ed17ec8f16e79faa349b2fcf0dc37e3a5f164f74c","dweb:/ipfs/QmaU1JST3a9a38zPJrghofJrW8n6AtNLkQR7xvU5VNQ5yU"],"license":"MIT"}},"version":1},"id":35}